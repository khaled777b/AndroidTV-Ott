package com.hiveview.domybox.service.parser;import java.io.InputStream;import java.util.ArrayList;import org.json.JSONArray;import org.json.JSONException;import org.json.JSONObject;import com.hiveview.domybox.service.entity.WeatherInfo;import com.hiveview.domybox.service.exception.ServiceException;import com.hiveview.domybox.utils.StringUtils;public class WeatherInfoParser extends BaseParser{	@Override	public ArrayList<WeatherInfo> executeToObject(InputStream in)throws ServiceException{		ArrayList<WeatherInfo> list = new ArrayList<WeatherInfo>();		String jsonStr = StringUtils.converStreamToString(in);				try {			WeatherInfo entity = new WeatherInfo() ;			JSONObject obj = new JSONObject(jsonStr);			//			JSONObject dataObj = obj.getJSONObject("data");//			errorCode = statusObj.getInt("code"); 			errorCode = obj.getString("code");			 //			JSONObject result = obj.getJSONObject("result");			JSONArray contents = obj.getJSONArray("result");						int count = contents.length();			for(int i = 0 ; i < count ; i++){				JSONObject object = contents.getJSONObject(i);				entity = new WeatherInfo();				entity.setDate(object.getString("date"));				entity.setWeekDay(object.getString("weekDay"));				entity.setWeather(object.getString("weather"));				entity.setTemperature(object.getString("temperature"));				entity.setWindDir(object.getString("windDir"));				entity.setWind(object.getString("wind"));				entity.setType(object.getInt("type"));												JSONObject weatherIconVoObject = object.getJSONObject("weatherIconVo");				entity.setName(weatherIconVoObject.getString("name"));				entity.setDayIcon(weatherIconVoObject.getString("dayIcon"));				entity.setNightIcon(weatherIconVoObject.getString("nightIcon"));				entity.setId(weatherIconVoObject.getInt("id"));								try{					JSONObject weatherWallpaperVoObject = weatherIconVoObject.optJSONObject("weatherWallpaperVo");					entity.setDayWallpaper(weatherWallpaperVoObject.optString("dayWallpaper"));					entity.setNightWallpaper(weatherWallpaperVoObject.optString("nightWallpaper"));				}catch (Exception e) {				}								JSONObject hsienVoObj = object.optJSONObject("hsienVo");				entity.setHsienName(hsienVoObj.optString("hsienName"));				entity.setHsienNo(hsienVoObj.optString("hsienNo"));												list.add(entity);			}					} catch (JSONException e) {			e.printStackTrace();			throw new ServiceException(10);		}				return list;	}			@Override	public String getErrorCode(){				return errorCode;			}}