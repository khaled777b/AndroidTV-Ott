package com.hiveview.domybox.common.image;import android.content.Context;import android.graphics.Bitmap;import android.os.Handler;import android.util.AttributeSet;import android.widget.ImageView;import com.hiveview.domybox.common.image.ImageLoader.ImageLoaderListener;public class ImageLoadView extends ImageView implements ImageLoaderListener{		protected Handler mHandler;	private Context context;	protected String imageUrl;	protected ImageCacheManager cacheManager;	public static boolean isPrimaryView	=	true;	//	public static boolean isLoadDown	=	false;	public  ImageLoadView(Context context, AttributeSet attrs, int defStyle) {		super(context, attrs, defStyle);		this.context = context;		init();	}	public ImageLoadView(Context context, AttributeSet attrs) {		super(context, attrs);		this.context = context;		init();	}	public ImageLoadView(Context context) {		super(context);		this.context = context;		init();	}		private void init(){		cacheManager = ImageCacheManager.getInstance(context);	}		public void setImageUrl(String imageUrl,Handler mHandler){				this.imageUrl = imageUrl;		this.mHandler = mHandler;		Bitmap bitmap = cacheManager.get(imageUrl);				if(bitmap!=null) {			setImageBitmap(bitmap);		}else{			ImageTaskManager taskManager = ImageTaskManager.getInstance();			ImageLoader loader = new ImageLoader(imageUrl,this);			taskManager.submit(loader);		}	}			@Override	public void onFailure() {		mHandler.post(new Runnable() {						@Override			public void run() {				//				setImageResource(R.drawable.img_default);			}		});			}	@Override	public void onComplete(String url,Bitmap bitmap) {		cacheManager.putListImage(url, bitmap);				mHandler.post(new Runnable() {						@Override			public void run() {								setImageBitmap(cacheManager.get(imageUrl));			}		});			}}